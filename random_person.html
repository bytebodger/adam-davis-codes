<html lang="en">
   <head>
      <title>Random Person</title>
   </head>
   <body>
      <div>
         <span id="year"></span> <span id="age"></span> in <span id="country"></span>
         <br/>
         <br/>
         <span id="label"></span>
         <br/>
         <br/>
         <span id="fantasyNameGeneratorLink"></span>
      </div>
   </body>
</html>

<script>
   const getUrlParameters = () => {
      const urlParams = new URLSearchParams(window.location.search);
      let processedUrlParams = {};
      for (let entry of urlParams.entries()) {
         let [key, value] = entry;
         if (value.toLowerCase() === 'true')
            value = true;
         else if (value.toLowerCase() === 'false')
            value = false;
         else if (value.toLowerCase() === 'null')
            value = null;
         else if (!isNaN(parseFloat(value)))
            value = parseFloat(value);
         processedUrlParams[key] = value;
      }
      return processedUrlParams;
   };

   const labels = [
      'actuary',
      'alchemist',
      'alewife',
      'ambassador',
      'amputeer',
      'archaenist',
      'armorer',
      'arsonist',
      'artist',
      'assassin',
      'astrologer',
      'bailiff',
      'baker',
      'bandit',
      'bard',
      'barker',
      'barrister',
      'bartender',
      'beggar',
      'blacksmith',
      'boatswain',
      'boatwright',
      'bodger',
      'bodyguard',
      'bookbinder',
      'bookie',
      'bottler',
      'bounty hunter',
      'bower',
      'brewer',
      'butcher',
      'butler',
      'calligrapher',
      'candlemaker',
      'captain',
      'carpenter',
      'cartographer',
      'cartwright',
      'chamberlain',
      'chancellor',
      'chef',
      'citizen',
      'clerk',
      'cobbler',
      'cognosci',
      'con artist',
      'conscript',
      'constable',
      'consultant',
      'cook',
      'courier',
      'courtesan',
      'crier',
      'deckhand',
      'detonatrix',
      'diver',
      'drill instructor',
      'ebny processor',
      'educator',
      'elder',
      'embroiderer',
      'engraver',
      'escort',
      'evangelist',
      'executioner',
      'explorer',
      'farmer',
      'farmhand',
      'ferry operator',
      'fish herder',
      'fisherman',
      'fishmonger',
      'flogger',
      'fortune teller',
      'fowler',
      'furrier',
      'gardener',
      'general',
      'gladiator',
      'governor',
      'grave digger',
      'grocer',
      'groomer',
      'guard',
      'guide',
      'healer',
      'herald',
      'herbalist',
      'herder',
      'hermit',
      'historian',
      'hobbler',
      'hunter',
      'innkeeper',
      'jailer',
      'janitor',
      'jester',
      'jeweler',
      'judge',
      'juggler',
      'lamplighter',
      'landlord',
      'leecher',
      'lender',
      'lieutenant',
      'locksmith',
      'lookout',
      'lumberjack',
      'marshal',
      'mason',
      'master',
      'medium',
      'mercenary',
      'merchant',
      'messenger',
      'miller',
      'minstrel',
      'minter',
      'monk',
      'mortician',
      'netminder',
      'noble',
      'painter',
      'peasant',
      'peddler',
      'physician',
      'pickpocket',
      'pilgrim',
      'pioneer',
      'playwright',
      'poacher',
      'poet',
      'porter',
      'potter',
      'priest',
      'privateer',
      'quartermaster',
      'raker',
      'ranger',
      'reaper',
      'reeve',
      'resistance fighter',
      'roofer',
      'root pusher',
      'root singer',
      'saltfoot',
      'scale inspector',
      'scaler',
      'scavenger',
      'scout',
      'scribe',
      'scrivener',
      'scullion',
      'servant',
      'settler',
      'sheriff',
      'singer',
      'smuggler',
      'socialite',
      'soldier',
      'solicitor',
      'spinster',
      'spiritualist',
      'squatter',
      'squire',
      'steward',
      'stonecutter',
      'summoner',
      'tailor',
      'tamer',
      'tanner',
      'tax collector',
      'theologian',
      'thespian',
      'thief',
      'thug',
      'tomb raider',
      'torturer',
      'trader',
      'trainer',
      'translator',
      'trapper',
      'treasurer',
      'trencher',
      'troubadour',
      'tutor',
      'union steward',
      'valet',
      'wagoner',
      'war counsel',
      'warden',
      'watchman',
      'weaver',
      'webber',
      'wheelwright',
      'whisperer',
      'wrangler',
      'writer',
      'yeoman',
   ];
   const countries = {
      'Adja': {
         'start': 842,
         'demonym': 'Argosian',
         'nameBase': 'afrikaner-names'
      },
      'Blepi': {
         'start': 292,
         'demonym': 'Blepian',
         'nameBase': 'akan-names'
      },
      'Boucieia': {
         'start': 949,
         'demonym': 'Boucieian',
         'nameBase': 'modern-irish-names'
      },
      'Chuiti': {
         'start': 1840,
         'demonym': 'Chuitian',
         'nameBase': 'punjabi-names'
      },
      'Cervi': {
         'start': 363,
         'demonym': 'Cervan',
         'nameBase': 'lithuanian-names'
      },
      'Collia': {
         'start': 1110,
         'demonym': 'Collian',
         'nameBase': 'uzbek-names'
      },
      'Copuseia': {
         'start': 822,
         'demonym': 'Copuseian',
         'nameBase': 'indonesian-names'
      },
      'Enepia': {
         'start': 766,
         'demonym': 'Enepian',
         'nameBase': 'kikuyu-names'
      },
      'Enoeria': {
         'start': 729,
         'demonym': 'Enoerian',
         'nameBase': 'moldovan-names'
      },
      'Ephia': {
         'start': 769,
         'demonym': 'Ephian',
         'nameBase': 'polish_names'
      },
      'Galmonia': {
         'start': 700,
         'demonym': 'Galmonian',
         'nameBase': 'marwari-names'
      },
      'Golia': {
         'start': 952,
         'demonym': 'Golian',
         'nameBase': 'khmer-names'
      },
      'Gorgania': {
         'start': 577,
         'demonym': 'Gorganian',
         'nameBase': 'georgian-names'
      },
      'Hineia': {
         'start': 1212,
         'demonym': 'Hineian',
         'nameBase': 'gujarati-names'
      },
      'Kala': {
         'start': 384,
         'demonym': 'Kalan',
         'nameBase': 'telugu-names'
      },
      'Klasis': {
         'start': 571,
         'demonym': 'Klasian',
         'nameBase': 'zazaki-names'
      },
      'Llanpiq': {
         'start': 2112,
         'demonym': 'Llanpiq',
         'nameBase': 'hmong-names'
      },
      'Mapit': {
         'start': 606,
         'demonym': 'Mapit',
         'nameBase': 'tatar-names'
      },
      'Oneia': {
         'start': 1919,
         'demonym': 'Oneian',
         'nameBase': 'kyrgyz-names'
      },
      'Phonas': {
         'start': 1902,
         'demonym': 'Phonaecian',
         'nameBase': 'sikh-names'
      },
      'Pozia': {
         'start': 687,
         'demonym': 'Pozian',
         'nameBase': 'luxembourgish-names'
      },
      'Prielia': {
         'start': 320,
         'demonym': 'Prielian',
         'nameBase': 'maltese-names'
      },
      'Quillia': {
         'start': 1390,
         'demonym': 'Quillian',
         'nameBase': 'ndebele-names'
      },
      'Quita': {
         'start': 1509,
         'demonym': 'Quitan',
         'nameBase': 'tswana-names'
      },
      'Toteria': {
         'start': 591,
         'demonym': 'Toterian',
         'nameBase': 'pakistani-names'
      },
      'Tumpia': {
         'start': 2014,
         'demonym': 'Tumpian',
         'nameBase': 'thai-names'
      },
      'Ucarania': {
         'start': 1731,
         'demonym': 'Ucaranian',
         'nameBase': 'russian_names'
      },
      'Ahja': {
         'start': 589,
         'demonym': 'Ahjan',
         'nameBase': 'japanese_names'
      },
      'Ahti': {
         'start': 787,
         'demonym': 'Ahtian',
         'nameBase': 'cypriot-names'
      },
      'Asjaria': {
         'start': 660,
         'demonym': 'Asjarian',
         'nameBase': 'marathi-names'
      },
      'Atria': {
         'start': 762,
         'demonym': 'Atrian',
         'nameBase': 'belgian-names'
      },
      'Boissain': {
         'start': 2051,
         'demonym': 'Boissain',
         'nameBase': 'latvian-names'
      },
      'Bouzia': {
         'start': 807,
         'demonym': 'Bouzian',
         'nameBase': 'dutch_names'
      },
      'Charia': {
         'start': 1181,
         'demonym': 'Charian',
         'nameBase': 'edwardian-names'
      },
      'Cheia': {
         'start': 1775,
         'demonym': 'Cheian',
         'nameBase': 'amish-names'
      },
      'Chevia': {
         'start': 2089,
         'demonym': 'Chevian',
         'nameBase': 'estonian-names'
      },
      'Dinaisia': {
         'start': 1222,
         'demonym': 'Dinaisian',
         'nameBase': 'french_names'
      },
      'Falet': {
         'start': 1001,
         'demonym': 'Faleian',
         'nameBase': 'hispanic_names'
      },
      'God': {
         'start': 942,
         'demonym': 'Goddite',
         'nameBase': 'german_names'
      },
      'Gongia': {
         'start': 1700,
         'demonym': 'Gongian',
         'nameBase': 'korean-names'
      },
      'Guil': {
         'start': 740,
         'demonym': 'Guilian',
         'nameBase': 'roman_names'
      },
      'Hetmaa': {
         'start': 1518,
         'demonym': 'Hetmaan',
         'nameBase': 'chinese_names'
      },
      'Igne': {
         'start': 1475,
         'demonym': 'Ignen',
         'nameBase': 'cornish-names'
      },
      'Ignia': {
         'start': 1973,
         'demonym': 'Ignian',
         'nameBase': 'maori-names'
      },
      'Inensia': {
         'start': 372,
         'demonym': 'Inensian',
         'nameBase': 'hindi-names'
      },
      'Kwong': {
         'start': 1909,
         'demonym': 'Kwongian',
         'nameBase': 'vietnamese_names'
      },
      'Lahjia': {
         'start': 780,
         'demonym': 'Lahjian',
         'nameBase': 'malaysian-names'
      },
      'Lancia': {
         'start': 2040,
         'demonym': 'Lancian',
         'nameBase': 'latin-names'
      },
      'Lokka': {
         'start': 501,
         'demonym': 'Lokkan',
         'nameBase': 'quechua-names'
      },
      'Masalia': {
         'start': 718,
         'demonym': 'Masalian',
         'nameBase': 'nepalese-names'
      },
      'Maversia': {
         'start': 1430,
         'demonym': 'Maversian',
         'nameBase': 'kazakh-names'
      },
      'Mouber': {
         'start': 1616,
         'demonym': 'Mouberian',
         'nameBase': 'celtic-welsh-names'
      },
      'Namgongia': {
         'start': 1039,
         'demonym': 'Namgongian',
         'nameBase': 'malagasy-names'
      },
      'Ngania': {
         'start': 911,
         'demonym': 'Nganian',
         'nameBase': 'galician-names'
      },
      'Ngia': {
         'start': 1984,
         'demonym': 'Ngian',
         'nameBase': 'kerala-names'
      },
      'Nilaslia': {
         'start': 1355,
         'demonym': 'Nilaslian',
         'nameBase': 'greek_names'
      },
      'Ochebia': {
         'start': 730,
         'demonym': 'Ochebian',
         'nameBase': 'haitian-names'
      },
      'Pishingia': {
         'start': 1409,
         'demonym': 'Pishingian',
         'nameBase': 'persian-names'
      },
      'Presia': {
         'start': 1101,
         'demonym': 'Presian',
         'nameBase': 'byzantine-names'
      },
      'Rinenmaa': {
         'start': 651,
         'demonym': 'Rinenmaan',
         'nameBase': 'edo-japanese-names'
      },
      'Sceraisia': {
         'start': 1460,
         'demonym': 'Sceraisian',
         'nameBase': 'brazilian-names'
      },
      'Shamo': {
         'start': 2069,
         'demonym': 'Shamonian',
         'nameBase': 'turkish_names'
      },
      'Shunia': {
         'start': 1111,
         'demonym': 'Shunian',
         'nameBase': 'chechen-names'
      },
      'Siukingia': {
         'start': 2098,
         'demonym': 'Siukingia',
         'nameBase': 'luo-names'
      },
      'Taisinia': {
         'start': 1295,
         'demonym': 'Taisinian',
         'nameBase': 'cypriot-names'
      },
      'Thigny': {
         'start': 699,
         'demonym': 'Thignian',
         'nameBase': 'jewish_names'
      },
      'Tins': {
         'start': 1659,
         'demonym': 'Tinsian',
         'nameBase': 'roma-gypsy-names'
      },
      'Torholmaa': {
         'start': 148,
         'demonym': 'Torholmaan',
         'nameBase': 'burmese-myanmar-names'
      },
      'Tseun': {
         'start': 1290,
         'demonym': 'Tseunian',
         'nameBase': 'frisian-names'
      },
      'Vilmi': {
         'start': 249,
         'demonym': 'Vilmian',
         'nameBase': 'yakut-names'
      },
      'Wansia': {
         'start': 800,
         'demonym': 'Wansian',
         'nameBase': 'sindhi-names'
      },
      'Auld Cervia': {
         'start': 11,
         'end': 479,
         'demonym': 'Auld Cervian',
         'nameBase': 'etruscan-names'
      },
      'Catro': {
         'start': 480,
         'demonym': 'Catrian',
         'nameBase': 'portuguese-names'
      },
      'Cervia': {
         'start': 480,
         'demonym': 'Cervian',
         'nameBase': 'italian_names'
      },
      'Morvatia': {
         'start': 480,
         'demonym': 'Morvatian',
         'nameBase': 'czech-names'
      },
      'Poglia': {
         'start': 480,
         'demonym': 'Poglian',
         'nameBase': 'amish-names'
      },
      'Ponia': {
         'start': 480,
         'demonym': 'Ponian',
         'nameBase': 'british-english-names'
      },
      'Tollia': {
         'start': 480,
         'demonym': 'Tollian',
         'nameBase': 'swiss-names'
      },
      'Tumia': {
         'start': 480,
         'demonym': 'Tumian',
         'nameBase': 'hispanic_names'
      },
      'Varic': {
         'start': 480,
         'demonym': 'Varian',
         'nameBase': 'jamaican-names'
      },
      'Vetri': {
         'start': 480,
         'demonym': 'Vetrian',
         'nameBase': 'austrian-names'
      },
      'Diaspora': {
         'start': 452,
         'demonym': 'Diasporan',
         'nameBase': 'papuan-names'
      },
      'Noctern': {
         'start': 616,
         'demonym': 'Nocternal',
         'nameBase': 'oriya-names'
      },
   };
   const labelIndex = Math.floor(Math.random() * labels.length);
   const label = labels[labelIndex];
   const countryNames = Object.keys(countries);
   const countryIndex = Math.floor(Math.random() * countryNames.length);
   const countryName = countryNames[countryIndex];
   const lowercaseCountryName = countryName.toLowerCase();
   const country = countries[countryName];
   let startYear = country.start;
   const endYear = country.hasOwnProperty('end') ? country.end : 3910;
   const urlParameters = getUrlParameters();
   if (urlParameters.hasOwnProperty('startYear')) {
      const requestedStartYear = parseInt(urlParameters.startYear, 10);
      if (startYear < requestedStartYear)
         startYear = requestedStartYear;
   }
   const year = Math.floor(Math.random() * (endYear - startYear) + startYear);
   let age = 'Age of Gnosis';
   if (year < 480)
      age = 'Age of Cervia';
   else if (year < 2115)
      age = 'Age of Expansion';
   else if (year < 3011)
      age = 'Age of Rivals';
   const yearSpan = document.getElementById('year');
   yearSpan.innerHTML = year.toString();
   const ageSpan = document.getElementById('age');
   ageSpan.innerHTML = age;
   const countrySpan = document.getElementById('country');
   countrySpan.innerHTML = `<a href='https://www.worldanvil.com/w/excilior/a/${lowercaseCountryName}-article' target='_blank'>${countryName} (${country.demonym})</a>`;
   const labelSpan = document.getElementById('label');
   labelSpan.innerHTML = label;
   const fantasyNameGeneratorLinkSpan = document.getElementById('fantasyNameGeneratorLink');
   fantasyNameGeneratorLinkSpan.innerHTML = `<a href='https://www.fantasynamegenerators.com/${country.nameBase}.php' target='_blank'>Names</a>`;
</script>
